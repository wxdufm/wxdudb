extends ../layout

block content
  .container#options
    .row
      .col-xs-12
        h2='Options'
        btn-group.btn-group-vertical
          button.btn.btn-default#delete(value="Delete") Delete
          button.btn.btn-default(value="Add") Add
  .container#releases
    .row
      .col-xs-12
        h1='All Releases'
        table.table-bordered#releases
          thead
            th.options Select
            th Artist
            th Title
            th Status
            th Date Received
            th._id RELEASE ID
          tbody
            each release, i in releases
              tr
                td.options 
                  div.select
                    input(type="checkbox")
                td #{release.artist}
                td #{release.title}
                td #{release.status}
                td #{release.date_received}
                td._id #{release._id}
            tr
              div.options 
                button.btn.btn-default#cancel(value="Cancel") Cancel
                form(method="post" action="/releases/:id/delete")
                  button.btn.btn-default#confirm(type="submit" value="Confirm") Confirm
block append scripts
  script(type='text/javascript' src='/vendor/jquery/jquery.tablesorter.min.js')
  script(type='text/javascript')
    
    $(document).ready(function(){
      $("table.table-bordered#releases").tablesorter(); 
    });
    
    $(function(){
      $('#delete').click(function(){
        $('.options').css('visibility','visible');
      });
    });

    $(function(){
      $('#cancel').click(function(){
         $('.options').css('visibility','collapse');
      });
    });

    $(function(){
      $('#confirm').click(function(){
        var checkedValues = new Array();
        $('td.options input:checkbox:checked').each(function(){
          var a = $(this).closest('td').siblings('td._id')[0];
          checkedValues.push(a.innerHTML);
        });
        alert(checkedValues);
      });
    });
